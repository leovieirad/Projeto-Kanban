{% extends "boards/base.html" %}

{% block content %}
<div class="page">
    <div class="header">
            <div style="display:flex;align-items:center;gap:16px;flex:1;">
                <h1 class="page-title">Meus Quadros</h1>
                <form method="get" class="board-search" style="margin-left:8px;">
                    <input name="q" type="search" class="search-input" placeholder="Procurar quadros..." value="{{ request.GET.q }}">
                </form>
            </div>
            <a href="{% url 'boards:create_board' %}" class="btn-primary btn-new">+ Novo quadro</a>
    </div>

    {% if boards %}
            <div class="boards-grid">
                    {% for board in boards %}
                    <div class="board-card">
                        <h2>{{ board.title }}</h2>
                        {% if board.description %}
                            <p class="board-desc">{{ board.description|truncatechars:120 }}</p>
                        {% endif %}
                        <div class="board-meta">{{ board.created_at|date:"d/m/Y" }}</div>
                        <div class="board-actions" style="display:flex;gap:8px;margin-top:12px;">
                            <a class="btn-secondary btn-open" href="{% url 'boards:detail' board.pk %}">Abrir quadro</a>
                            <form method="post" action="{% url 'boards:delete_board' board.pk %}" onsubmit="return confirm('Deseja realmente excluir este quadro?');">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger">Excluir</button>
                            </form>
                        </div>
                    </div>
                    {% endfor %}
            </div>
    {% else %}
            <p class="empty-text">Você ainda não possui quadros cadastrados.</p>
    {% endif %}
</div>
{% endblock %}
